<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="true">
    <meta charset="UTF-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>时间线 - MX's Blog</title>
    <link rel="stylesheet" href="/assets/css/global.css">
    <link rel="stylesheet" href="/assets/css/pace-theme-flash.css">
    <link rel="stylesheet" href="/assets/css/d-audio.css">
    <link rel="stylesheet" href="/assets/css/myPagination.css">
    <link rel="stylesheet" href="/assets/css/archive.css">
    <link rel="stylesheet" href="/assets/css/index.css">
    <link rel="shortcut icon" href="/images/blog-logo.png">
    <style rel="stylesheet">
        .lazy-image {
            background: url('/images/loading.gif') no-repeat center;
            background-size: 26% 35%;
            height: 100%;
            width: 100%;
        }
    </style>
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <script src="/assets/js/include.js"></script>
    <div data-include="/includes/nav.html"></div>
    <!--主体-->
    <main class="big-container">
        <article class="article">
            <ul class="achieve-box" id="timeline-list">
                <!-- 由 JS 动态填充 -->
            </ul>
        </article>
    </main>
    <div data-include="/includes/footer.html"></div>
    <script type="text/javascript">
        document.addEventListener('includesReady', function () {
            // 从 articles.json 加载时间线
            fetch('/articles.json')
                .then(function (res) { return res.json(); })
                .then(function (articles) {
                    var container = document.getElementById('timeline-list');
                    if (!container || !articles.length) return;

                    // 按课程分组
                    var grouped = {};
                    articles.forEach(function (a) {
                        var course = a.course || '其他';
                        if (!grouped[course]) grouped[course] = [];
                        grouped[course].push(a);
                    });

                    // 渲染每个课程分组
                    var courseNames = Object.keys(grouped);
                    courseNames.forEach(function (courseName) {
                        var items = grouped[courseName];
                        // 课程标题
                        var yearLi = document.createElement('li');
                        yearLi.className = 'year';
                        yearLi.innerHTML = courseName + ' <span style="color: #3aa4ff">' + items.length + '</span> 篇';
                        container.appendChild(yearLi);

                        // 文章列表
                        items.forEach(function (a) {
                            var li = document.createElement('li');
                            li.className = 'detail-item';
                            li.innerHTML = '<span class="date">' + (a.category || '') + '</span>' +
                                '<a href="' + a.url + '" class="title">' + a.title + '</a>';
                            container.appendChild(li);
                        });
                    });
                });

            // 图片懒加载
            const lazyImage = new LazyImage('.lazy-image');
        });
    </script>
</body>

</html>